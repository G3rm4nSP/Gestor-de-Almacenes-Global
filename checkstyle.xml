<?xml version="1.0" ?>
<!DOCTYPE module PUBLIC
    "-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
    "https://checkstyle.org/dtds/configuration_1_3.dtd">

<module name="Checker">

  <!-- ========================================================= -->
  <!-- Suppressions -->
  <!-- ========================================================= -->
  <module name="SuppressionFilter">
    <property name="file" value="checkstyle/suppressions.xml"/>
    <property name="optional" value="true"/>
  </module>

  <module name="SuppressWarningsFilter"/>

  <!-- ========================================================= -->
  <!-- General file checks -->
  <!-- ========================================================= -->
  <property name="fileExtensions" value="java,properties,xml"/>

  <module name="NewlineAtEndOfFile"/>
  <module name="FileTabCharacter"/>
  <module name="FileLength"/>

  <module name="RegexpSingleline">
    <property name="format" value="\s+$"/>
    <property name="message" value="Line has trailing spaces."/>
  </module>

  <module name="LineLength">
    <property name="max" value="120"/>
  </module>

  <!-- ========================================================= -->
  <!-- TreeWalker -->
  <!-- ========================================================= -->
  <module name="TreeWalker">

    <!-- ================= Block & structure ================= -->
    <module name="AvoidNestedBlocks"/>
    <module name="EmptyBlock"/>
    <module name="NeedBraces"/>
    <module name="LeftCurly"/>
    <module name="RightCurly"/>
    <module name="OneStatementPerLine"/>

    <!-- ================= Class design ================= -->
    <module name="FinalClass"/>
    <module name="HideUtilityClassConstructor"/>
    <module name="InterfaceIsType"/>
    <module name="OneTopLevelClass"/>
    <module name="VisibilityModifier"/>

    <!-- ================= Coding correctness ================= -->
    <module name="CovariantEquals"/>
    <module name="DefaultComesLast"/>
    <module name="EmptyStatement"/>
    <module name="EqualsAvoidNull"/>
    <module name="EqualsHashCode"/>
    <module name="ExplicitInitialization"/>
    <module name="FallThrough"/>
    <module name="InnerAssignment"/>
    <module name="MissingSwitchDefault"/>
    <module name="ModifiedControlVariable"/>
    <module name="MultipleVariableDeclarations"/>
    <module name="NoClone"/>
    <module name="NoFinalizer"/>
    <module name="ParameterAssignment"/>
    <module name="SimplifyBooleanExpression"/>
    <module name="SimplifyBooleanReturn"/>
    <module name="StringLiteralEquality"/>
    <module name="UnnecessaryParentheses"/>

    <!-- ================= Defensive checks ================= -->
    <module name="HiddenField">
      <property name="ignoreConstructorParameter" value="true"/>
      <property name="ignoreSetter" value="true"/>
    </module>

    <module name="MagicNumber">
      <property name="ignoreFieldDeclaration" value="true"/>
      <property name="ignoreAnnotation" value="true"/>
      <property name="ignoreHashCodeMethod" value="true"/>
    </module>

    <!-- ================= Imports ================= -->
    <!-- Spotless gestiona el orden, Checkstyle solo valida -->
    <module name="AvoidStarImport">
      <property name="excludes"
                value="java.awt,java.io,java.util,javax.swing,
                       java.lang.Math,
                       org.junit.Assert,
                       org.mockito.Mockito,
                       org.springframework.test.web.servlet.result.MockMvcResultMatchers"/>
    </module>

    <module name="IllegalImport"/>
    <module name="RedundantImport"/>
    <module name="UnusedImports"/>

    <!-- ================= Naming ================= -->
    <module name="ConstantName"/>
    <module name="LocalFinalVariableName"/>
    <module name="LocalVariableName"/>
    <module name="MemberName"/>

    <module name="MethodName">
      <!-- Google-style + tests -->
      <property name="format" value="^[a-z][a-zA-Z0-9_]*$"/>
    </module>

    <module name="PackageName">
      <property name="format" value="^[a-z]+(\.[a-z][a-z0-9]*)*$"/>
    </module>

    <module name="ParameterName"/>
    <module name="StaticVariableName"/>
    <module name="TypeName"/>

    <!-- ================= Size limits ================= -->
    <module name="MethodLength"/>
    <module name="ParameterNumber"/>

    <!-- ================= Whitespace (NO indentation) ================= -->
    <module name="GenericWhitespace"/>
    <module name="MethodParamPad"/>
    <module name="NoWhitespaceAfter"/>
    <module name="NoWhitespaceBefore"/>
    <module name="ParenPad"/>
    <module name="TypecastParenPad"/>
    <module name="WhitespaceAfter"/>

    <module name="WhitespaceAround">
      <property name="allowEmptyConstructors" value="true"/>
      <property name="allowEmptyMethods" value="true"/>
      <property name="allowEmptyTypes" value="true"/>
    </module>

    <!-- ================= Misc ================= -->
    <module name="ArrayTypeStyle"/>
    <module name="OuterTypeFilename"/>
    <module name="UpperEll"/>

    <!-- ================= Modifiers ================= -->
    <module name="ModifierOrder"/>
    <module name="RedundantModifier"/>

    <!-- Enable @SuppressWarnings -->
    <module name="SuppressWarningsHolder"/>

  </module>
</module>
